<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Settings &mdash; phyddle 0.0.5 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Workspace" href="workspace.html" />
    <link rel="prev" title="Pipeline" href="pipeline.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/phyddle_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.0.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipeline</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#settings-by-file">Settings by file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#settings-via-cli">Settings via CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#descriptions">Descriptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-step-setting">The <code class="docutils literal notranslate"><span class="pre">step</span></code> setting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-proj-setting">The <code class="docutils literal notranslate"><span class="pre">proj</span></code> setting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workspace.html">Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats.html">Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tricks.html">Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="updates.html">Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">phyddle</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Settings</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/settings.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="settings">
<span id="id1"></span><h1>Settings<a class="headerlink" href="#settings" title="Permalink to this heading"></a></h1>
<p>There are two ways to configure the settings of a phyddle analysis: through a <a class="reference internal" href="#config-file"><span class="std std-ref">config file</span></a> or the <a class="reference internal" href="#config-cli"><span class="std std-ref">command line</span></a>. Command line settings outrank config file settings.</p>
<section id="settings-by-file">
<span id="config-file"></span><h2>Settings by file<a class="headerlink" href="#settings-by-file" title="Permalink to this heading"></a></h2>
<p>The phyddle config file is a Python dictionary of analysis arguments (<code class="docutils literal notranslate"><span class="pre">args</span></code>) that configure how phyddle pipeline steps behave. Because it’s a Python script, you can write code within the config file to specify your analysis, if you find that helpful. The below example defines settings into different blocks based on which pipeline step first needs a given setting. However, any setting might be used by different pipeline steps, so we concatenate all settings into a single dictionary called <code class="docutils literal notranslate"><span class="pre">args</span></code>, which is then used by all pipeline steps. Settings configured by file can be adjusted through the <a class="reference internal" href="#config-cli"><span class="std std-ref">command line</span></a>, if desired.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, phyddle assumes you want to use the config file called <code class="docutils literal notranslate"><span class="pre">config.py</span></code>. Use a different config file by calling, e.g. <code class="docutils literal notranslate"><span class="pre">./run_pipline</span> <span class="pre">--cfg</span> <span class="pre">my_other_config.py</span></code></p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#==============================================================================#</span>
<span class="c1"># Default phyddle config file                                                  #</span>
<span class="c1">#==============================================================================#</span>

<span class="c1"># external import</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span>

<span class="c1"># helper variables</span>
<span class="n">num_char</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">num_states</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">args</span> <span class="o">=</span> <span class="p">{</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Project organization          #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;proj&#39;</span>    <span class="p">:</span> <span class="s1">&#39;my_project&#39;</span><span class="p">,</span>               <span class="c1"># project name(s)</span>
    <span class="s1">&#39;step&#39;</span>    <span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span>                        <span class="c1"># step(s) to run</span>
    <span class="s1">&#39;verbose&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>                       <span class="c1"># print verbose phyddle output?</span>
    <span class="s1">&#39;sim_dir&#39;</span> <span class="p">:</span> <span class="s1">&#39;../workspace/simulate&#39;</span><span class="p">,</span>    <span class="c1"># directory for simulated data</span>
    <span class="s1">&#39;fmt_dir&#39;</span> <span class="p">:</span> <span class="s1">&#39;../workspace/format&#39;</span><span class="p">,</span>      <span class="c1"># directory for tensor-formatted data</span>
    <span class="s1">&#39;trn_dir&#39;</span> <span class="p">:</span> <span class="s1">&#39;../workspace/train&#39;</span><span class="p">,</span>       <span class="c1"># directory for trained network</span>
    <span class="s1">&#39;plt_dir&#39;</span> <span class="p">:</span> <span class="s1">&#39;../workspace/plot&#39;</span><span class="p">,</span>        <span class="c1"># directory for plotted figures</span>
    <span class="s1">&#39;est_dir&#39;</span> <span class="p">:</span> <span class="s1">&#39;../workspace/estimate&#39;</span><span class="p">,</span>    <span class="c1"># directory for predictions on new data</span>
    <span class="s1">&#39;log_dir&#39;</span> <span class="p">:</span> <span class="s1">&#39;../workspace/log&#39;</span><span class="p">,</span>         <span class="c1"># directory for analysis logs</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Multiprocessing               #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;use_parallel&#39;</span>   <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>                <span class="c1"># use multiprocessing to speed up jobs?</span>
    <span class="s1">&#39;num_proc&#39;</span>       <span class="p">:</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span>                  <span class="c1"># how many CPUs to use (-2 means all but 2)</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Model Configuration           #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;model_type&#39;</span>         <span class="p">:</span> <span class="s1">&#39;geosse&#39;</span><span class="p">,</span>        <span class="c1"># model type defines general states and events</span>
    <span class="s1">&#39;model_variant&#39;</span>      <span class="p">:</span> <span class="s1">&#39;equal_rates&#39;</span><span class="p">,</span>   <span class="c1"># model variant defines rate assignments</span>
    <span class="s1">&#39;num_char&#39;</span>           <span class="p">:</span> <span class="n">num_char</span><span class="p">,</span>        <span class="c1"># number of evolutionary characters</span>
    <span class="s1">&#39;num_states&#39;</span>         <span class="p">:</span> <span class="n">num_states</span><span class="p">,</span>      <span class="c1"># number of states per character</span>
    <span class="s1">&#39;rv_fn&#39;</span>              <span class="p">:</span> <span class="p">{</span>                <span class="c1"># distributions for model parameters</span>
        <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">expon</span><span class="o">.</span><span class="n">rvs</span><span class="p">,</span>
        <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">expon</span><span class="o">.</span><span class="n">rvs</span><span class="p">,</span>
        <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">expon</span><span class="o">.</span><span class="n">rvs</span><span class="p">,</span>
        <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">expon</span><span class="o">.</span><span class="n">rvs</span>
    <span class="p">},</span>
    <span class="s1">&#39;rv_arg&#39;</span>             <span class="p">:</span> <span class="p">{</span>                <span class="c1"># loc/scale/shape for model parameter dists</span>
        <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;scale&#39;</span> <span class="p">:</span> <span class="mf">0.2</span> <span class="p">},</span>
        <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;scale&#39;</span> <span class="p">:</span> <span class="mf">0.1</span> <span class="p">},</span>
        <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;scale&#39;</span> <span class="p">:</span> <span class="mf">0.1</span> <span class="p">},</span>
        <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;scale&#39;</span> <span class="p">:</span> <span class="mf">0.5</span> <span class="p">}</span>
    <span class="p">},</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Simulate Step settings        #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;sim_method&#39;</span>        <span class="p">:</span> <span class="s1">&#39;master&#39;</span><span class="p">,</span>         <span class="c1"># command, master, [phylojunction], ...</span>
    <span class="s1">&#39;sim_command&#39;</span>       <span class="p">:</span> <span class="s1">&#39;beast&#39;</span><span class="p">,</span>          <span class="c1"># exact command string, argument is output file prefix</span>
    <span class="s1">&#39;sim_logging&#39;</span>       <span class="p">:</span> <span class="s1">&#39;verbose&#39;</span><span class="p">,</span>        <span class="c1"># verbose, compressed, or clean</span>
    <span class="s1">&#39;start_idx&#39;</span>         <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>                <span class="c1"># first simulation replicate index</span>
    <span class="s1">&#39;end_idx&#39;</span>           <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>             <span class="c1"># last simulation replicate index</span>
    <span class="s1">&#39;sample_population&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">],</span>            <span class="c1"># name of population to sample</span>
    <span class="s1">&#39;stop_time&#39;</span>         <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>               <span class="c1"># time to stop simulation</span>
    <span class="s1">&#39;min_num_taxa&#39;</span>      <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>               <span class="c1"># min number of taxa for valid sim</span>
    <span class="s1">&#39;max_num_taxa&#39;</span>      <span class="p">:</span> <span class="mi">500</span><span class="p">,</span>              <span class="c1"># max number of taxa for valid sim</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Format Step settings          #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;tree_type&#39;</span>         <span class="p">:</span> <span class="s1">&#39;extant&#39;</span><span class="p">,</span>         <span class="c1"># use model with serial or extant tree</span>
    <span class="s1">&#39;chardata_format&#39;</span>   <span class="p">:</span> <span class="s1">&#39;nexus&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tree_width_cats&#39;</span>   <span class="p">:</span> <span class="p">[</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">500</span> <span class="p">],</span>     <span class="c1"># tree width categories for phylo-state tensors</span>
    <span class="s1">&#39;tree_encode_type&#39;</span>  <span class="p">:</span> <span class="s1">&#39;height_brlen&#39;</span><span class="p">,</span>   <span class="c1"># how to encode phylo brlen? height_only or height_brlen</span>
    <span class="s1">&#39;char_encode_type&#39;</span>  <span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>        <span class="c1"># how to encode discrete states? one_hot or integer</span>
    <span class="s1">&#39;param_pred&#39;</span>        <span class="p">:</span> <span class="p">[</span>                 <span class="c1"># model parameters to predict (labels)</span>
        <span class="s1">&#39;w_0&#39;</span><span class="p">,</span> <span class="s1">&#39;e_0&#39;</span><span class="p">,</span> <span class="s1">&#39;d_0_1&#39;</span><span class="p">,</span> <span class="s1">&#39;b_0_1&#39;</span>
    <span class="p">],</span>
    <span class="s1">&#39;param_data&#39;</span>        <span class="p">:</span> <span class="p">[],</span>               <span class="c1"># model parameters that are known (aux. data)</span>
    <span class="s1">&#39;tensor_format&#39;</span>     <span class="p">:</span> <span class="s1">&#39;hdf5&#39;</span><span class="p">,</span>           <span class="c1"># save as compressed HDF5 or raw csv</span>
    <span class="s1">&#39;save_phyenc_csv&#39;</span>   <span class="p">:</span> <span class="kc">False</span><span class="p">,</span>            <span class="c1"># save intermediate phylo-state vectors to file</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Train Step settings           #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;trn_objective&#39;</span>     <span class="p">:</span> <span class="s1">&#39;param_est&#39;</span><span class="p">,</span>      <span class="c1"># what is the learning task? param_est or model_test</span>
    <span class="s1">&#39;tree_width&#39;</span>        <span class="p">:</span> <span class="mi">500</span><span class="p">,</span>              <span class="c1"># tree width category used to train network</span>
    <span class="s1">&#39;num_epochs&#39;</span>        <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>               <span class="c1"># number of training intervals (epochs)</span>
    <span class="s1">&#39;prop_test&#39;</span>         <span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>             <span class="c1"># proportion of sims in test dataset</span>
    <span class="s1">&#39;prop_validation&#39;</span>   <span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>             <span class="c1"># proportion of sims in validation dataset</span>
    <span class="s1">&#39;prop_calibration&#39;</span>  <span class="p">:</span> <span class="mf">0.20</span><span class="p">,</span>             <span class="c1"># proportion of sims in CPI calibration dataset</span>
    <span class="s1">&#39;cpi_coverage&#39;</span>      <span class="p">:</span> <span class="mf">0.95</span><span class="p">,</span>             <span class="c1"># coverage level for CPIs</span>
    <span class="s1">&#39;cpi_asymmetric&#39;</span>    <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>             <span class="c1"># upper/lower (True) or symmetric (False) CPI adjustments</span>
    <span class="s1">&#39;batch_size&#39;</span>        <span class="p">:</span> <span class="mi">128</span><span class="p">,</span>              <span class="c1"># number of samples in each training batch</span>
    <span class="s1">&#39;loss&#39;</span>              <span class="p">:</span> <span class="s1">&#39;mse&#39;</span><span class="p">,</span>            <span class="c1"># loss function for learning</span>
    <span class="s1">&#39;optimizer&#39;</span>         <span class="p">:</span> <span class="s1">&#39;adam&#39;</span><span class="p">,</span>           <span class="c1"># optimizer for network weight/bias parameters</span>
    <span class="s1">&#39;metrics&#39;</span>           <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;mae&#39;</span><span class="p">,</span> <span class="s1">&#39;acc&#39;</span><span class="p">],</span>   <span class="c1"># recorded training metrics</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Estimate Step settings        #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;est_prefix&#39;</span>     <span class="p">:</span> <span class="s1">&#39;new.1&#39;</span><span class="p">,</span>             <span class="c1"># prefix for new dataset to predict</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Plot Step settings            #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;plot_train_color&#39;</span>      <span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>       <span class="c1"># plot color for training data</span>
    <span class="s1">&#39;plot_test_color&#39;</span>       <span class="p">:</span> <span class="s1">&#39;purple&#39;</span><span class="p">,</span>     <span class="c1"># plot color for test data</span>
    <span class="s1">&#39;plot_val_color&#39;</span>        <span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>        <span class="c1"># plot color for validation data</span>
    <span class="s1">&#39;plot_aux_color&#39;</span>        <span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>      <span class="c1"># plot color for input auxiliary data</span>
    <span class="s1">&#39;plot_label_color&#39;</span>      <span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>     <span class="c1"># plot color for labels (params)</span>
    <span class="s1">&#39;plot_est_color&#39;</span>        <span class="p">:</span> <span class="s1">&#39;black&#39;</span>       <span class="c1"># plot color for estimated data/values</span>

<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="settings-via-cli">
<span id="config-cli"></span><h2>Settings via CLI<a class="headerlink" href="#settings-via-cli" title="Permalink to this heading"></a></h2>
<p>Settings applied through a <a class="reference internal" href="#config-file"><span class="std std-ref">config file</span></a> can be overwritten by setting options when running phyddle from the command line. The names of settings are the same for the command line options and in the config file. Using command line options makes it easy to adjust the behavior of pipeline steps without needing to edit the config file. List all settings that can be adjusted with the command line using the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">    </span>$<span class="w"> </span>./run_phyddle.py<span class="w"> </span>--help

usage:<span class="w"> </span>run_phyddle.py<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">[</span>-c<span class="o">]</span><span class="w"> </span><span class="o">[</span>-p<span class="o">]</span><span class="w"> </span><span class="o">[</span>-s<span class="o">]</span><span class="w"> </span><span class="o">[</span>-v<span class="o">]</span><span class="w"> </span><span class="o">[</span>--use_parallel<span class="o">]</span><span class="w"> </span><span class="o">[</span>--num_proc<span class="o">]</span><span class="w"> </span><span class="o">[</span>--sim_dir<span class="o">]</span><span class="w"> </span><span class="o">[</span>--fmt_dir<span class="o">]</span><span class="w"> </span><span class="o">[</span>--trn_dir<span class="o">]</span><span class="w"> </span><span class="o">[</span>--est_dir<span class="o">]</span><span class="w"> </span><span class="o">[</span>--plt_dir<span class="o">]</span><span class="w"> </span><span class="o">[</span>--log_dir<span class="o">]</span><span class="w"> </span><span class="o">[</span>--show_models<span class="o">]</span><span class="w"> </span><span class="o">[</span>--model_type<span class="o">]</span><span class="w"> </span><span class="o">[</span>--model_variant<span class="o">]</span><span class="w"> </span><span class="o">[</span>--num_char<span class="o">]</span><span class="w"> </span><span class="o">[</span>--sim_method<span class="o">]</span><span class="w"> </span><span class="o">[</span>--sim_command<span class="o">]</span><span class="w"> </span><span class="o">[</span>--sim_logging<span class="o">]</span>
<span class="w">                  </span><span class="o">[</span>--start_idx<span class="o">]</span><span class="w"> </span><span class="o">[</span>--end_idx<span class="o">]</span><span class="w"> </span><span class="o">[</span>--stop_time<span class="o">]</span><span class="w"> </span><span class="o">[</span>--min_num_taxa<span class="o">]</span><span class="w"> </span><span class="o">[</span>--max_num_taxa<span class="o">]</span><span class="w"> </span><span class="o">[</span>--tree_type<span class="o">]</span><span class="w"> </span><span class="o">[</span>--tree_width_cats<span class="o">]</span><span class="w"> </span><span class="o">[</span>--tree_encode_type<span class="o">]</span><span class="w"> </span><span class="o">[</span>--char_encode_type<span class="o">]</span><span class="w"> </span><span class="o">[</span>--chardata_format<span class="o">]</span><span class="w"> </span><span class="o">[</span>--tensor_format<span class="o">]</span><span class="w"> </span><span class="o">[</span>--save_phyenc_csv<span class="o">]</span><span class="w"> </span><span class="o">[</span>--trn_objective<span class="o">]</span><span class="w"> </span><span class="o">[</span>--tree_width<span class="o">]</span>
<span class="w">                  </span><span class="o">[</span>--num_epochs<span class="o">]</span><span class="w"> </span><span class="o">[</span>--batch_size<span class="o">]</span><span class="w"> </span><span class="o">[</span>--prop_test<span class="o">]</span><span class="w"> </span><span class="o">[</span>--prop_validation<span class="o">]</span><span class="w"> </span><span class="o">[</span>--prop_calibration<span class="o">]</span><span class="w"> </span><span class="o">[</span>--cpi_coverage<span class="o">]</span><span class="w"> </span><span class="o">[</span>--cpi_asymmetric<span class="o">]</span><span class="w"> </span><span class="o">[</span>--loss<span class="o">]</span><span class="w"> </span><span class="o">[</span>--optimizer<span class="o">]</span><span class="w"> </span><span class="o">[</span>--est_prefix<span class="o">]</span><span class="w"> </span><span class="o">[</span>--plot_train_color<span class="o">]</span><span class="w"> </span><span class="o">[</span>--plot_label_color<span class="o">]</span><span class="w"> </span><span class="o">[</span>--plot_test_color<span class="o">]</span><span class="w"> </span><span class="o">[</span>--plot_val_color<span class="o">]</span>
<span class="w">                  </span><span class="o">[</span>--plot_aux_color<span class="o">]</span><span class="w"> </span><span class="o">[</span>--plot_est_color<span class="o">]</span>

phyddle<span class="w"> </span>pipeline<span class="w"> </span>config

options:
-h,<span class="w"> </span>--help<span class="w">           </span>show<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
-c<span class="w"> </span>,<span class="w"> </span>--cfg<span class="w">           </span>Config<span class="w"> </span>file<span class="w"> </span>name
-p<span class="w"> </span>,<span class="w"> </span>--proj<span class="w">          </span>Project<span class="w"> </span>name<span class="w"> </span>used<span class="w"> </span>as<span class="w"> </span>directory<span class="w"> </span>across<span class="w"> </span>pipeline<span class="w"> </span>stages
-s<span class="w"> </span>,<span class="w"> </span>--step<span class="w">          </span>Pipeline<span class="w"> </span>step<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>defined<span class="w"> </span>with<span class="w"> </span><span class="o">(</span>S<span class="o">)</span>imulate,<span class="w"> </span><span class="o">(</span>F<span class="o">)</span>ormat,<span class="w"> </span><span class="o">(</span>T<span class="o">)</span>rain,<span class="w"> </span><span class="o">(</span>E<span class="o">)</span>stimate,<span class="w"> </span><span class="o">(</span>P<span class="o">)</span>lot,<span class="w"> </span>or<span class="w"> </span><span class="o">(</span>A<span class="o">)</span>ll
-v<span class="w"> </span>,<span class="w"> </span>--verbose<span class="w">       </span>Verbose<span class="w"> </span>output<span class="w"> </span>to<span class="w"> </span>screen?<span class="w"> </span><span class="o">(</span>recommended<span class="o">)</span>
--use_parallel<span class="w">       </span>Use<span class="w"> </span>parallelization?<span class="w"> </span><span class="o">(</span>recommended<span class="o">)</span>
--num_proc<span class="w">           </span>How<span class="w"> </span>many<span class="w"> </span>cores<span class="w"> </span><span class="k">for</span><span class="w"> </span>multiprocessing?<span class="w"> </span><span class="o">(</span>e.g.<span class="w"> </span><span class="m">4</span><span class="w"> </span>uses<span class="w"> </span><span class="m">4</span>,<span class="w"> </span>-2<span class="w"> </span>uses<span class="w"> </span>all<span class="w"> </span>but<span class="w"> </span><span class="m">2</span><span class="o">)</span>
--sim_dir<span class="w">            </span>Directory<span class="w"> </span><span class="k">for</span><span class="w"> </span>raw<span class="w"> </span>simulated<span class="w"> </span>data
--fmt_dir<span class="w">            </span>Directory<span class="w"> </span><span class="k">for</span><span class="w"> </span>tensor-formatted<span class="w"> </span>simulated<span class="w"> </span>data
--trn_dir<span class="w">            </span>Directory<span class="w"> </span><span class="k">for</span><span class="w"> </span>trained<span class="w"> </span>networks<span class="w"> </span>and<span class="w"> </span>training<span class="w"> </span>predictions
--est_dir<span class="w">            </span>Directory<span class="w"> </span><span class="k">for</span><span class="w"> </span>new<span class="w"> </span>datasets<span class="w"> </span>and<span class="w"> </span>predictions
--plt_dir<span class="w">            </span>Directory<span class="w"> </span><span class="k">for</span><span class="w"> </span>plotted<span class="w"> </span>results
--log_dir<span class="w">            </span>Directory<span class="w"> </span><span class="k">for</span><span class="w"> </span>logs<span class="w"> </span>of<span class="w"> </span>analysis<span class="w"> </span>metadata
--show_models<span class="w">        </span>Print<span class="w"> </span>all<span class="w"> </span>available<span class="w"> </span>model<span class="w"> </span>types<span class="w"> </span>and<span class="w"> </span>variants?
--model_type<span class="w">         </span>Model<span class="w"> </span><span class="nb">type</span>
--model_variant<span class="w">      </span>Model<span class="w"> </span>variant
--num_char<span class="w">           </span>Number<span class="w"> </span>of<span class="w"> </span>characters
--sim_method<span class="w">         </span>Simulation<span class="w"> </span>method
--sim_command<span class="w">        </span>Simulation<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="o">(</span>when<span class="w"> </span><span class="nv">sim_method</span><span class="o">==</span><span class="s1">&#39;command&#39;</span><span class="o">)</span>
--sim_logging<span class="w">        </span>Simulation<span class="w"> </span>logging<span class="w"> </span>style
--start_idx<span class="w">          </span>Start<span class="w"> </span>index<span class="w"> </span><span class="k">for</span><span class="w"> </span>simulation
--end_idx<span class="w">            </span>End<span class="w"> </span>index<span class="w"> </span><span class="k">for</span><span class="w"> </span>simulation
--stop_time<span class="w">          </span>Maximum<span class="w"> </span>duration<span class="w"> </span>of<span class="w"> </span>evolution<span class="w"> </span><span class="k">for</span><span class="w"> </span>each<span class="w"> </span>simulation
--min_num_taxa<span class="w">       </span>Minimum<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>taxa<span class="w"> </span><span class="k">for</span><span class="w"> </span>each<span class="w"> </span>simulation
--max_num_taxa<span class="w">       </span>Maximum<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>taxa<span class="w"> </span><span class="k">for</span><span class="w"> </span>each<span class="w"> </span>simulation
--tree_type<span class="w">          </span>Type<span class="w"> </span>of<span class="w"> </span>tree
--tree_width_cats<span class="w">    </span>The<span class="w"> </span>phylo-state<span class="w"> </span>tensor<span class="w"> </span>widths<span class="w"> </span><span class="k">for</span><span class="w"> </span>formatting<span class="w"> </span>training<span class="w"> </span>datasets,<span class="w"> </span>space-delimited
--tree_encode_type<span class="w">   </span>Method<span class="w"> </span><span class="k">for</span><span class="w"> </span>encoding<span class="w"> </span>branch<span class="w"> </span>length<span class="w"> </span>info<span class="w"> </span><span class="k">in</span><span class="w"> </span>tensor
--char_encode_type<span class="w">   </span>Method<span class="w"> </span><span class="k">for</span><span class="w"> </span>encoding<span class="w"> </span>character<span class="w"> </span>states<span class="w"> </span><span class="k">in</span><span class="w"> </span>tensor
--chardata_format<span class="w">    </span>Input<span class="w"> </span>format<span class="w"> </span><span class="k">for</span><span class="w"> </span>character<span class="w"> </span>matrix<span class="w"> </span>data
--tensor_format<span class="w">      </span>Output<span class="w"> </span>format<span class="w"> </span><span class="k">for</span><span class="w"> </span>storing<span class="w"> </span>tensors<span class="w"> </span>of<span class="w"> </span>training<span class="w"> </span>dataset
--save_phyenc_csv<span class="w">    </span>Save<span class="w"> </span>encoded<span class="w"> </span>phylogenetic<span class="w"> </span>tensor<span class="w"> </span>encoding<span class="w"> </span>to<span class="w"> </span>csv?
--trn_objective<span class="w">      </span>Objective<span class="w"> </span>of<span class="w"> </span>training<span class="w"> </span>procedure
--tree_width<span class="w">         </span>The<span class="w"> </span>phylo-state<span class="w"> </span>tensor<span class="w"> </span>width<span class="w"> </span>dataset<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>neural<span class="w"> </span>network
--num_epochs<span class="w">         </span>Number<span class="w"> </span>of<span class="w"> </span>training<span class="w"> </span>epochs
--batch_size<span class="w">         </span>Training<span class="w"> </span>batch<span class="w"> </span>sizes
--prop_test<span class="w">          </span>Proportion<span class="w"> </span>of<span class="w"> </span>data<span class="w"> </span>used<span class="w"> </span>as<span class="w"> </span><span class="nb">test</span><span class="w"> </span>examples<span class="w"> </span><span class="o">(</span>demonstrate<span class="w"> </span>trained<span class="w"> </span>network<span class="w"> </span>performance<span class="o">)</span>
--prop_validation<span class="w">    </span>Proportion<span class="w"> </span>of<span class="w"> </span>data<span class="w"> </span>used<span class="w"> </span>as<span class="w"> </span>validation<span class="w"> </span>examples<span class="w"> </span><span class="o">(</span>diagnose<span class="w"> </span>network<span class="w"> </span>overtraining<span class="o">)</span>
--prop_calibration<span class="w">   </span>Proportion<span class="w"> </span>of<span class="w"> </span>data<span class="w"> </span>used<span class="w"> </span>as<span class="w"> </span>calibration<span class="w"> </span>examples<span class="w"> </span><span class="o">(</span>calibrate<span class="w"> </span>conformal<span class="w"> </span>prediction<span class="w"> </span>intervals<span class="o">)</span>
--cpi_coverage<span class="w">       </span>Expected<span class="w"> </span>coverage<span class="w"> </span>percent<span class="w"> </span><span class="k">for</span><span class="w"> </span>calibrated<span class="w"> </span>prediction<span class="w"> </span>intervals<span class="w"> </span><span class="o">(</span>CPIs<span class="o">)</span>
--cpi_asymmetric<span class="w">     </span>Use<span class="w"> </span>asymmetric<span class="w"> </span><span class="o">(</span>True<span class="o">)</span><span class="w"> </span>or<span class="w"> </span>symmetric<span class="w"> </span><span class="o">(</span>False<span class="o">)</span><span class="w"> </span>adjustments<span class="w"> </span><span class="k">for</span><span class="w"> </span>CPIs?
--loss<span class="w">               </span>Loss<span class="w"> </span><span class="k">function</span><span class="w"> </span>used<span class="w"> </span>as<span class="w"> </span>optimization<span class="w"> </span>criterion
--optimizer<span class="w">          </span>Method<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>optimizing<span class="w"> </span>neural<span class="w"> </span>network
--est_prefix<span class="w">         </span>Predict<span class="w"> </span>results<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>dataset
--plot_train_color<span class="w">   </span>Plotting<span class="w"> </span>color<span class="w"> </span><span class="k">for</span><span class="w"> </span>training<span class="w"> </span>data<span class="w"> </span>elements
--plot_label_color<span class="w">   </span>Plotting<span class="w"> </span>color<span class="w"> </span><span class="k">for</span><span class="w"> </span>training<span class="w"> </span>label<span class="w"> </span>elements
--plot_test_color<span class="w">    </span>Plotting<span class="w"> </span>color<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>data<span class="w"> </span>elements
--plot_val_color<span class="w">     </span>Plotting<span class="w"> </span>color<span class="w"> </span><span class="k">for</span><span class="w"> </span>validation<span class="w"> </span>data<span class="w"> </span>elements
--plot_aux_color<span class="w">     </span>Plotting<span class="w"> </span>color<span class="w"> </span><span class="k">for</span><span class="w"> </span>auxiliary<span class="w"> </span>input<span class="w"> </span>data<span class="w"> </span>elements
--plot_est_color<span class="w">     </span>Plotting<span class="w"> </span>color<span class="w"> </span><span class="k">for</span><span class="w"> </span>new<span class="w"> </span>estimation<span class="w"> </span>elements
</pre></div>
</div>
</section>
<section id="descriptions">
<span id="setting-description"></span><h2>Descriptions<a class="headerlink" href="#descriptions" title="Permalink to this heading"></a></h2>
<p>This section highlights how to configure some of the more-powerful but also more-complicated phyddle settings.</p>
<section id="the-step-setting">
<h3>The <code class="docutils literal notranslate"><span class="pre">step</span></code> setting<a class="headerlink" href="#the-step-setting" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">step</span></code> setting controls which steps should be applied.
Each pipeline step is represented by a capital letter:
<code class="docutils literal notranslate"><span class="pre">S</span></code> for <a class="reference internal" href="pipeline.html#simulate"><span class="std std-ref">Simulate</span></a>, <code class="docutils literal notranslate"><span class="pre">F</span></code> for <a class="reference internal" href="pipeline.html#format"><span class="std std-ref">Format</span></a>, <code class="docutils literal notranslate"><span class="pre">T</span></code> for <a class="reference internal" href="pipeline.html#train"><span class="std std-ref">Train</span></a>, <code class="docutils literal notranslate"><span class="pre">E</span></code> for <a class="reference internal" href="pipeline.html#estimate"><span class="std std-ref">Estimate</span></a>, <code class="docutils literal notranslate"><span class="pre">P</span></code> for <a class="reference internal" href="pipeline.html#plot"><span class="std std-ref">Plot</span></a>, and <code class="docutils literal notranslate"><span class="pre">A</span></code> for all steps.</p>
<p>For example, the following two commands are equivalent</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--step<span class="w"> </span>A
./run_phyddle.py<span class="w"> </span>--step<span class="w"> </span>SFTEP
</pre></div>
</div>
<p>whereas calling</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--step<span class="w"> </span>SF
</pre></div>
</div>
<p>commands phyddle to perform the Simulate and Format steps, but not the Train, Estimate, or Plot steps.</p>
</section>
<section id="the-proj-setting">
<h3>The <code class="docutils literal notranslate"><span class="pre">proj</span></code> setting<a class="headerlink" href="#the-proj-setting" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">proj</span></code> setting controls how project names are assigned to different pipeline steps.
Typically, <code class="docutils literal notranslate"><span class="pre">proj</span></code> is provided a single project name that is shared across all pipeline steps.
For example, calling</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--proj<span class="w"> </span>my_project
</pre></div>
</div>
<p>causes all results from this phyddle analysis to be stored in a subdirectory called <code class="docutils literal notranslate"><span class="pre">my_project</span></code>.
The <code class="docutils literal notranslate"><span class="pre">proj</span></code> setting can also be used to specify different project names for individual pipeline steps. For example, calling</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--proj<span class="w"> </span>my_project,E:new_estimate,P:new_plot
</pre></div>
</div>
<p>would use <code class="docutils literal notranslate"><span class="pre">new_estimate</span></code> as the project name for the <code class="docutils literal notranslate"><span class="pre">E</span></code> step (Estimate), <code class="docutils literal notranslate"><span class="pre">new_plot</span></code> for the <code class="docutils literal notranslate"><span class="pre">P</span></code> step (Plot), and <code class="docutils literal notranslate"><span class="pre">my_project</span></code> for all other steps.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pipeline.html" class="btn btn-neutral float-left" title="Pipeline" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="workspace.html" class="btn btn-neutral float-right" title="Workspace" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>